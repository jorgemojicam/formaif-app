<ng-template #loading>
    <div class="container-spinner">
        <mat-spinner></mat-spinner>
    </div>
</ng-template>
<ng-container *ngIf="loadData; else loading">
    <form [formGroup]="actividadesForm">
        <mat-tab-group mat-align-tabs="start">
            <div formArrayName="act" fxFlex="100%">
                <div *ngFor="let acti of actividades().controls; let ac=index">
                    <mat-tab label="Act {{ac}}">
                        <div [formGroupName]="ac">
                            <mat-card>
                                <mat-card-content>
                                    <div fxLayout="row wrap">
                                        <div class="gr" fxFlex="40%" fxFlex.xs="40%" fxFlex.sm="45%">
                                            <mat-form-field>
                                                <input type="text" matInput placeholder="Actividad" id="nombre{{ac}}"
                                                    formControlName="nombre">
                                            </mat-form-field>
                                        </div>
                                        <div class="gr" fxFlex="40%" fxFlex.xs="45%" fxFlex.sm="45%">
                                            <mat-form-field>
                                                <mat-label>Tipo Actividad</mat-label>
                                                <mat-select formControlName="tipo" id="tipo{{ac}}" required>
                                                    <mat-option>--</mat-option>
                                                    <mat-option *ngFor="let tip of tipoAct" [value]="tip.id">
                                                        {{tip.name}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </mat-card-content>
                            </mat-card>
                            <mat-accordion class="example-headers-align" multi>
                                <mat-expansion-panel>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            Cruce #1
                                        </mat-panel-title>
                                        <mat-panel-description>
                                            Ventas
                                            <mat-icon>account_balance</mat-icon>
                                        </mat-panel-description>
                                    </mat-expansion-panel-header>
                                    <!-- ventas b r m  -->
                                    <div fxLayout="row wrap">
                                        <div class="gr" fxFlex="100%" fxFlex.xs="100%" fxFlex.sm="100%">
                                            <mat-radio-group formControlName="periodoventas"
                                                aria-label="Select an option">
                                                <mat-radio-button value="1">Dia</mat-radio-button>
                                                <mat-radio-button value="2">Semana</mat-radio-button>
                                                <mat-radio-button value="3">Quincena</mat-radio-button>
                                            </mat-radio-group>
                                        </div>

                                        <div class="gr" fxFlex="30%" fxFlex.xs="33%" fxFlex.sm="25%">
                                            <mat-form-field>
                                                <mat-label>Buenas</mat-label>
                                                <mat-select formControlName="diasB" multiple>
                                                    <mat-option *ngFor="let d of diasSemana" [value]="d.id"
                                                        [disabled]="acti.value.diasR.indexOf(d.id) >= 0 || acti.value.diasM.indexOf(d.id) >= 0">
                                                        {{d.name}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>

                                        <div class="gr" fxFlex="30%" fxFlex.xs="25%" fxFlex.sm="25%">
                                            <mat-form-field>
                                                <input type="number" matInput placeholder="Valor Buenas"
                                                    id="valorB{{ac}}" formControlName="valorB">
                                            </mat-form-field>
                                        </div>

                                        <div class="gr" fxFlex="30%" fxFlex.xs="25%" fxFlex.sm="25%">
                                            <mat-form-field>
                                                <input type="number" readonly matInput placeholder="Total"
                                                    id="totalB{{ac}}" formControlName="totalB">
                                            </mat-form-field>
                                        </div>
                                        <ng-content *ngIf="acti.value.periodoventas !=2; then regulares">
                                        </ng-content>
                                        <ng-template #regulares>
                                            <div class="gr" fxFlex="30%" fxFlex.xs="25%" fxFlex.sm="25%">
                                                <mat-form-field>
                                                    <mat-label>Regulares</mat-label>
                                                    <mat-select formControlName="diasR" multiple>
                                                        <mat-option *ngFor="let d of diasSemana"
                                                            [disabled]="acti.value.diasB.indexOf(d.id) >= 0 || acti.value.diasM.indexOf(d.id) >= 0"
                                                            [value]="d.id">
                                                            {{d.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="gr" fxFlex="30%" fxFlex.xs="25%" fxFlex.sm="25%">
                                                <mat-form-field>
                                                    <input type="number" matInput placeholder="Valor Regulares"
                                                        id="valorR{{ac}}" formControlName="valorR">
                                                </mat-form-field>
                                            </div>
                                            <div class="gr" fxFlex="30%" fxFlex.xs="25%" fxFlex.sm="25%">
                                                <mat-form-field>
                                                    <input type="number" readonly matInput placeholder="Total"
                                                        id="totalR{{ac}}" formControlName="totalR">
                                                </mat-form-field>
                                            </div>
                                        </ng-template>

                                        <div class="gr" fxFlex="30%" fxFlex.xs="25%" fxFlex.sm="25%">
                                            <mat-form-field>
                                                <mat-label>Malos</mat-label>
                                                <mat-select formControlName="diasM" multiple>
                                                    <mat-option *ngFor="let d of diasSemana"
                                                        [disabled]="acti.value.diasB.indexOf(d.id) >= 0 || acti.value.diasR.indexOf(d.id) >= 0"
                                                        [value]="d.id">
                                                        {{d.name}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>

                                        <div class="gr" fxFlex="30%" fxFlex.xs="25%" fxFlex.sm="25%">
                                            <mat-form-field>
                                                <input type="number" matInput placeholder="Valor Malas"
                                                    id="valorM{{ac}}" formControlName="valorM">
                                            </mat-form-field>
                                        </div>

                                        <div class="gr" fxFlex="30%" fxFlex.xs="25%" fxFlex.sm="25%">
                                            <mat-form-field>
                                                <input type="number" readonly matInput placeholder="Total"
                                                    id="totalM{{ac}}" formControlName="totalM">
                                            </mat-form-field>
                                        </div>
                                        <div class="gr" fxFlex="30%" fxFlex.xs="30%" fxFlex.sm="25%">
                                            <mat-form-field>
                                                <input type="number" readonly matInput placeholder="Promedio"
                                                    id="promedio{{ac}}" formControlName="promedio">
                                            </mat-form-field>
                                        </div>
                                        <div class="gr" fxFlex="30%" fxFlex.xs="15%" fxFlex.sm="15%">
                                            <mat-form-field>
                                                <input type="number" matInput placeholder="Dias" id="totalDias{{ac}}"
                                                    formControlName="totalDias">
                                            </mat-form-field>
                                        </div>
                                        <div class="gr" fxFlex="30%" fxFlex.xs="32%" fxFlex.sm="25%">
                                            <mat-form-field>
                                                <input type="number" readonly matInput placeholder="Total Promedio"
                                                    id="totalPromedio{{ac}}" formControlName="totalPromedio">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </mat-expansion-panel>
                                <!-- cruce 2 -->
                                <mat-expansion-panel>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            Cruce #2
                                        </mat-panel-title>
                                        <mat-panel-description>
                                            Historico
                                            <mat-icon>attach_money</mat-icon>
                                        </mat-panel-description>
                                    </mat-expansion-panel-header>
                                    <!-- ventas historicas -->
                                    <mat-card class="mat-card-cruce">
                                        <mat-card-header>
                                            <mat-card-title>Ventas Historicas</mat-card-title>
                                        </mat-card-header>

                                        <mat-card-content>
                                            <div fxLayout="row wrap">
                                                <div class="gr" fxFlex="100%" fxFlex.xs="100%" fxFlex.sm="100%">
                                                    <mat-form-field>
                                                        <mat-label>Frecuencia</mat-label>
                                                        <mat-select formControlName="periodohistoricas">
                                                            <mat-option *ngFor="let fre of frecuencia" [value]="fre">
                                                                {{fre.name}}
                                                            </mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                </div>
                                                <div formArrayName="ventasHis" class="alternate">
                                                    <div
                                                        *ngFor="let vent of ventashistoricas(ac).controls; let ven=index">
                                                        <div [formGroupName]="ven" fxLayout="row wrap">
                                                            <div class="gr" fxFlex="35%" fxFlex.xs="25%"
                                                                fxFlex.sm="25%">
                                                                <mat-form-field>
                                                                    <input type="number" matInput
                                                                        placeholder="{{acti.value.periodohistoricas.name}}"
                                                                        value="{{ven}}" id="dia{{ven}}"
                                                                        formControlName="dia" readonly>
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="gr" fxFlex="60%" fxFlex.xs="70%"
                                                                fxFlex.sm="45%">
                                                                <mat-form-field>
                                                                    <input type="number" matInput placeholder="Valor"
                                                                        id="valor{{ven}}" formControlName="valor">
                                                                </mat-form-field>
                                                            </div>
                                                            <button class="btndelete" color="warn" mat-icon-button
                                                                [disabled]="ven==0" (click)="removeVentas(ac,ven)">
                                                                <mat-icon>cancel</mat-icon>
                                                            </button>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-card-content>

                                        <button mat-fab aria-label="add" mat-mini-fab class="btnadd" type="button"
                                            color="accent" (click)="addVentashis(ac)" [disabled]="(acti.value.periodohistoricas.id ==1 && ventashistoricas(ac).length >= 7) ||
                                        (acti.value.periodohistoricas.id==2 && ventashistoricas(ac).length >= 4)">
                                            <mat-icon>add</mat-icon>
                                        </button>
                                    </mat-card>
                                    <br>
                                    <!-- produccion -->
                                    <mat-card class="mat-card-cruce">
                                        <mat-card-header>
                                            <mat-card-title>Produccion</mat-card-title>
                                            <mat-chip-list class="pull-right">
                                                <mat-chip color="accent" selected>{{acti.value.totalProduccion}}
                                                </mat-chip>
                                            </mat-chip-list>
                                        </mat-card-header>

                                        <mat-card-content>
                                            <div formArrayName="produccion" class="alternate">
                                                <div *ngFor="let prod of produccion(ac).controls; let pro=index">
                                                    <div [formGroupName]="pro" fxLayout="row wrap">
                                                        <div class="gr" fxFlex="20%" fxFlex.xs="30%" fxFlex.sm="33%">
                                                            <mat-form-field>
                                                                <input type="text" matInput placeholder="Nombre"
                                                                    id="nombre-{{ac}}-{{pro}}" formControlName="nombre">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="gr" fxFlex="5%" fxFlex.xs="15%" fxFlex.sm="15%">
                                                            <mat-form-field>
                                                                <input type="number" matInput placeholder="Cantidad"
                                                                    id="cantidad-{{ac}}-{{pro}}"
                                                                    formControlName="cantidad">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="gr" fxFlex="15%" fxFlex.xs="32%" fxFlex.sm="33%">
                                                            <mat-form-field>
                                                                <input type="number" matInput placeholder="Precio"
                                                                    id="valor-{{ac}}-{{pro}}" formControlName="valor">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="gr" fxFlex="20%" fxFlex.xs="35%" fxFlex.sm="33%">
                                                            <mat-form-field>
                                                                <mat-label>Frecuencia</mat-label>
                                                                <mat-select formControlName="frecuencia"
                                                                    id="frecuencia-{{ac}}-{{pro}}" required>
                                                                    <mat-option>--</mat-option>
                                                                    <mat-option *ngFor="let frec of frecuencia"
                                                                        [value]="frec">
                                                                        {{frec.name}}
                                                                    </mat-option>
                                                                </mat-select>
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="gr" fxFlex="15%" fxFlex.xs="35%" fxFlex.sm="33%">
                                                            <mat-form-field>
                                                                <input type="number" matInput placeholder="Total"
                                                                    id="total-{{ac}}-{{pro}}" readonly
                                                                    formControlName="total">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="gr" fxFlex="10%" fxFlex.xs="10%" fxFlex.sm="33%">
                                                            <button mat-fab type="button" color="warn" mat-mini-fab
                                                                (click)="removeProduccion(ac,pro)">
                                                                <mat-icon>delete</mat-icon>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-card-content>

                                        <button mat-fab aria-label="add" mat-mini-fab class="btnadd" type="button"
                                            color="accent" (click)="addProduccion(ac)"
                                            [disabled]="produccion(ac).length >= 5">
                                            <mat-icon>add</mat-icon>
                                        </button>
                                    </mat-card>
                                </mat-expansion-panel>
                                <!-- cruce 3  -->
                                <mat-expansion-panel>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            Cruce #3
                                        </mat-panel-title>
                                        <mat-panel-description>
                                            Costo de venta
                                            <mat-icon>add_shopping_cart</mat-icon>
                                        </mat-panel-description>
                                    </mat-expansion-panel-header>

                                    <!-- Materia prima -->
                                    <mat-card class="mat-card-cruce">
                                        <mat-card-header>
                                            <mat-card-title>Costo de venta</mat-card-title>
                                        </mat-card-header>
                                        <mat-chip-list>
                                            <mat-chip class="chip-full" color="primary" selected>Margen: {{acti.value.margen}} %</mat-chip>
                                            <mat-chip class="chip-full" color="accent" selected>Costo: {{acti.value.costo}} %</mat-chip>
                                        </mat-chip-list>
                                        <br>
                                        <mat-card-content>
                                            <div formArrayName="materiaprima" class="alternate">
                                                <div *ngFor="let prod of materiaprima(ac).controls; let mat=index"
                                                    [formGroupName]="mat" fxLayout="row wrap">

                                                    <div class="gr" fxFlex="30%" fxFlex.xs="32%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="text" matInput placeholder="Producto"
                                                                id="producto{{ac}}-{{mat}}" formControlName="producto">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="32%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="number" matInput placeholder="Cantidad"
                                                                id="cantidad{{mat}}" formControlName="cantidad">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="32%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="tel" matInput placeholder="Precio Venta"
                                                                id="precioVenProd{{mat}}"
                                                                formControlName="precioVenProd">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="70%" fxFlex.xs="70%" fxFlex.sm="70%">
                                                        <mat-form-field>
                                                            <input type="text" matInput
                                                                placeholder="Materia Prima principal"
                                                                id="materiaprimapri{{mat}}"
                                                                formControlName="materiaprimapri">
                                                        </mat-form-field>
                                                    </div>

                                                    <div class="gr" fxFlex="25%" fxFlex.xs="25%" fxFlex.sm="25%">
                                                        <mat-form-field>
                                                            <input type="number" matInput placeholder="Cantidad"
                                                                id="cantMatPri{{mat}}" formControlName="cantMatPri">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="50%" fxFlex.xs="50%" fxFlex.sm="50%">
                                                        <mat-form-field>
                                                            <mat-label>Unidad Venta</mat-label>
                                                            <mat-select formControlName="unidad"
                                                                id="unidad{{ac}}-{{mat}}" required>
                                                                <mat-option>--</mat-option>
                                                                <mat-option *ngFor="let un of unidades" [value]="un.id">
                                                                    {{un.name}}
                                                                </mat-option>
                                                            </mat-select>
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="45%" fxFlex.xs="47%" fxFlex.sm="45%">
                                                        <mat-form-field>
                                                            <input type="tel" matInput placeholder="Valor"
                                                                id="valorMatPri{{mat}}" formControlName="valorMatPri">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="50%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="text" matInput placeholder="Materia Prima 2"
                                                                id="matPrima2{{mat}}" formControlName="matPrima2">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="47%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="tel" matInput placeholder="Valor"
                                                                id="valorMatPri2{{mat}}" formControlName="valorMatPri2">
                                                        </mat-form-field>
                                                    </div>

                                                    <div class="gr" fxFlex="30%" fxFlex.xs="50%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="text" matInput placeholder="Materia Prima 3"
                                                                id="matPrima3{{mat}}" formControlName="matPrima3">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="47%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="tel" matInput placeholder="Valor"
                                                                id="valorMatPri3{{mat}}" formControlName="valorMatPri3">
                                                        </mat-form-field>
                                                    </div>

                                                    <div class="gr" fxFlex="30%" fxFlex.xs="50%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="text" matInput placeholder="Materia Prima 4"
                                                                id="matPrima4{{mat}}" formControlName="matPrima4">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="48%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="tel" matInput placeholder="Valor"
                                                                id="valorMatPri4{{mat}}" formControlName="valorMatPri4">
                                                        </mat-form-field>
                                                    </div>

                                                    <div class="gr" fxFlex="30%" fxFlex.xs="50%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="text" matInput placeholder="Materia Prima 5"
                                                                id="matPrima5{{mat}}" formControlName="matPrima5">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="48%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="tel" matInput placeholder="Valor"
                                                                id="valorMatPri5{{mat}}" formControlName="valorMatPri5">
                                                        </mat-form-field>
                                                    </div>

                                                    <div class="gr" fxFlex="30%" fxFlex.xs="50%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="text" matInput value="Mano de Obra"
                                                                id="ManoObra{{mat}}" formControlName="ManoObra">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="48%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="tel" matInput placeholder="Valor"
                                                                id="valorMao{{mat}}" formControlName="valorMao">
                                                        </mat-form-field>
                                                    </div>

                                                    <div class="gr" fxFlex="30%" fxFlex.xs="50%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="text" matInput id="cif{{mat}}" value="CIF"
                                                                formControlName="cif">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="48%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="tel" matInput placeholder="Valor"
                                                                id="valorCif{{mat}}" formControlName="valorCif">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="49%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="text" matInput placeholder="Precio Compra"
                                                                id="precioCompra{{mat}}" readonly
                                                                formControlName="precioCompra">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="49%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="text" matInput placeholder="Precio Venta"
                                                                id="precioVenta{{mat}}" readonly
                                                                formControlName="precioVenta">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="70%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="number" matInput placeholder="Participacion"
                                                                id="participacion{{mat}}"
                                                                formControlName="participacion">
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="gr" fxFlex="30%" fxFlex.xs="30%" fxFlex.sm="33%">
                                                        <mat-form-field>
                                                            <input type="number" matInput placeholder="Porcentaje"
                                                                id="porcentaje{{mat}}" formControlName="porcentaje">
                                                        </mat-form-field>
                                                    </div>
                                                    <button class="btndelete" color="warn" mat-icon-button
                                                        [disabled]="mat==0" (click)="deleteMarteriaRow(ac,mat)">
                                                        <mat-icon>cancel</mat-icon>
                                                    </button>
                                                </div>
                                            </div>

                                        </mat-card-content>

                                        <button mat-fab aria-label="add" mat-mini-fab class="btnadd" type="button"
                                            color="accent" (click)="addMateriaprima(ac)">
                                            <mat-icon>add</mat-icon>
                                        </button>
                                    </mat-card>

                                    <!-- compras -->
                                    <mat-card class="mat-card-cruce">
                                        <mat-card-header>
                                            <mat-card-title>Compras</mat-card-title>
                                        </mat-card-header>

                                        <mat-card-content>
                                            <div formArrayName="compras">
                                                <div *ngFor="let comp of compras(ac).controls; let com=index">
                                                    <div [formGroupName]="com" fxLayout="row wrap">
                                                        <div class="gr" fxFlex="30%" fxFlex.xs="30%" fxFlex.sm="33%">
                                                            <mat-form-field>
                                                                <input type="number" matInput placeholder="Cantidad"
                                                                    id="cantidad{{com}}" formControlName="cantidad">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="gr" fxFlex="10%" fxFlex.xs="30%" fxFlex.sm="33%">
                                                            <mat-form-field>
                                                                <input type="text" matInput placeholder="Descripcion"
                                                                    id="descripcion{{com}}"
                                                                    formControlName="descripcion">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="gr" fxFlex="20%" fxFlex.xs="55%" fxFlex.sm="33%">
                                                            <mat-form-field>
                                                                <mat-label>Frecuencia</mat-label>
                                                                <mat-select formControlName="frecuencia"
                                                                    id="frecuencia{{com}}" required>
                                                                    <mat-option>--</mat-option>
                                                                    <mat-option *ngFor="let frec of frecuencia"
                                                                        [value]="frec.id">
                                                                        {{frec.name}}
                                                                    </mat-option>
                                                                </mat-select>
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="gr" fxFlex="10%" fxFlex.xs="30%" fxFlex.sm="33%">
                                                            <mat-form-field>
                                                                <input type="text" matInput placeholder="Valor"
                                                                    id="valor{{com}}" formControlName="valor">
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-card-content>

                                        <button mat-fab aria-label="add" mat-mini-fab class="btnadd" type="button"
                                            color="accent" (click)="addCompras(ac)">
                                            <mat-icon>add</mat-icon>
                                        </button>
                                    </mat-card>

                                    <!-- Costo de venta -->
                                    <mat-card class="mat-card-cruce">
                                        <mat-card-header>
                                            <mat-card-title>Costo de venta</mat-card-title>
                                        </mat-card-header>

                                        <mat-card-content>
                                            <div formArrayName="costoventa">
                                                <div *ngFor="let prod of costoventa(ac).controls; let cos=index">
                                                    <div [formGroupName]="cos" fxLayout="row wrap">
                                                        <div class="gr" fxFlex="10%" fxFlex.xs="30%" fxFlex.sm="33%">
                                                            <mat-form-field>
                                                                <input type="text" matInput placeholder="Nombre"
                                                                    id="nombre{{cos}}" formControlName="nombre">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="gr" fxFlex="10%" fxFlex.xs="30%" fxFlex.sm="33%">
                                                            <mat-form-field>
                                                                <input type="number" matInput
                                                                    placeholder="% Participacio"
                                                                    id="participacion{{cos}}"
                                                                    formControlName="participacion">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="gr" fxFlex="10%" fxFlex.xs="30%" fxFlex.sm="33%">
                                                            <mat-form-field>
                                                                <input type="number" matInput
                                                                    placeholder="Precio Compra" id="precioCompra{{cos}}"
                                                                    formControlName="precioCompra">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="gr" fxFlex="10%" fxFlex.xs="30%" fxFlex.sm="33%">
                                                            <mat-form-field>
                                                                <input type="number" matInput placeholder="Precio Venta"
                                                                    id="precioVenta{{cos}}"
                                                                    formControlName="precioVenta">
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-card-content>

                                        <button mat-fab aria-label="add" mat-mini-fab class="btnadd" type="button"
                                            color="accent" (click)="addProduccion(ac)">
                                            <mat-icon>add</mat-icon>
                                        </button>
                                    </mat-card>

                                </mat-expansion-panel>

                            </mat-accordion>
                        </div>

                    </mat-tab>
                </div>
            </div>


        </mat-tab-group>
        <button mat-fab type="button" class="addact" color="primary" mat-mini-fab (click)="addActividad()">
            <mat-icon>add</mat-icon>
        </button>


    </form>
</ng-container>