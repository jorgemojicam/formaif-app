<form [formGroup]="adaptativoForm">
    <div fxLayout="row wrap" class="action-buttons">
        <div class="gr" fxFlex="80%" fxFlex.xs="60%" fxFlex.sm="60%">
            <button mat-stroked-button color="primary" (click)="accordion.openAll()">Expandir todo</button>
        </div>
        <div class="gr" fxFlex="20%" fxFlex.xs="40%" fxFlex.sm="40%">
            <button mat-stroked-button (click)="accordion.closeAll()">Contraer todo</button>
        </div>
    </div>

    <div formArrayName="adaptativa">
        <mat-accordion class="example-headers-align" multi>

            <mat-expansion-panel *ngFor="let adap of adaptativa().controls; let pre=index" [formGroupName]="pre">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        {{adap.value.dimension}}
                    </mat-panel-title>
                    <mat-panel-description>
                        
                    </mat-panel-description>
                </mat-expansion-panel-header>

                <div formArrayName="preguntas">
                    <div fxLayout="row wrap" class="content mat-elevation-z2" *ngFor="let pregu of preguntas(pre).controls; let pre=index" [formGroupName]="pre">
            
                        <div class="gr" fxFlex="100%" fxFlex.xs="100%" fxFlex.sm="100%">
                            {{pregu.value.descripcion}}
                        </div>
            
                        <div class="gr" fxFlex="100%" fxFlex.xs="100%" fxFlex.sm="100%">
                            <mat-form-field>
                                <mat-label>Respuesta</mat-label>
                                <mat-select formControlName="resultado" required>
                                    <mat-option>--</mat-option>
                                    <mat-option *ngFor="let res of pregu.value.respuestas" [value]="res">
                                        {{res.texto}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
            
                    </div>
                </div>

            </mat-expansion-panel>
        </mat-accordion>
    </div>




</form>